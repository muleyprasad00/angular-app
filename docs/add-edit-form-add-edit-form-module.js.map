{"version":3,"sources":["./src/app/pages/add-edit-form/add-edit-form-routing.module.ts","./src/app/pages/add-edit-form/add-edit-form.component.ts","./src/app/pages/add-edit-form/add-edit-form.component.html","./src/app/pages/add-edit-form/add-edit-form.module.ts"],"names":[],"mappings":"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","file":"add-edit-form-add-edit-form-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AddEditFormComponent } from './add-edit-form.component';\n\nconst routes: Routes = [{ path: '', component: AddEditFormComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AddEditFormRoutingModule { }\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\r\nimport { Apollo, gql, QueryRef } from 'apollo-angular';\r\nimport { capitalize } from 'lodash';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { Subscription } from 'rxjs';\r\nimport { UserConfigService } from 'src/app/user-config.service';\r\n\r\n@Component({\r\n  selector: 'app-add-edit-form',\r\n  templateUrl: './add-edit-form.component.html',\r\n  styleUrls: ['./add-edit-form.component.css']\r\n})\r\nexport class AddEditFormComponent implements OnInit {\r\n  breadcrumbList = ['Home', '', 'Update'];\r\n  i18n: any;\r\n  formsConfig: any;\r\n  queryConfig:any;\r\n  userConfigSub$!: Subscription;\r\n  pageName: string = '';\r\n  id: string = '';\r\n  show=false;\r\n  private query: QueryRef<any> | undefined;\r\n\r\n  constructor(private userService: UserConfigService, private route: ActivatedRoute,\r\n    private http: HttpClient, private spinner: NgxSpinnerService,\r\n    private apollo: Apollo) { }\r\n\r\n  ngOnInit(): void {\r\n    this.spinner.show();\r\n    this.route.paramMap.subscribe((params: ParamMap) => {\r\n      this.pageName = String(params.get('name'));\r\n      this.id = String(params.get('id'));\r\n\r\n      if (!this.pageName) return;\r\n      this.userConfigSub$ = this.userService.userCast.subscribe((userDetails: any) => {\r\n        if (userDetails.appName) {\r\n          if (this.userConfigSub$)\r\n            this.userConfigSub$.unsubscribe();\r\n          this.i18n = userDetails.i18n[0].translations;\r\n          this.breadcrumbList[1] = capitalize(this.pageName)\r\n          this.fetchData();          \r\n        }\r\n      });\r\n    })\r\n  }\r\n\r\n  fetchData() {\r\n    this.http.get(`/config/formsConfig.json`).subscribe((res: any) => {\r\n      this.formsConfig = res[this.pageName].formsConfig;\r\n      this.queryConfig = res[this.pageName].queryConfig;   \r\n      this.spinner.hide();\r\n      if (this.id !== 'null') {\r\n        this.fetchDataByID(res[this.pageName].queryConfig,);\r\n      }else{\r\n        this.show = true;\r\n      }\r\n    })\r\n  }\r\n\r\n  fetchDataByID(queryConfig: any) {\r\n    const requireColumns = this.formsConfig.map((item: { name: any; }) => item.name);\r\n    const query = gql`\r\n      query  ${queryConfig.queryName}($queryInput:QueryInput){\r\n        ${queryConfig.queryName}(queryInput:$queryInput){\r\n         data\r\n        }\r\n    }\r\n    `;\r\n    const reqConfig = queryConfig.variables;\r\n    reqConfig.columns = requireColumns;\r\n    reqConfig.id = this.id;\r\n    const variables:any = {\r\n      queryInput:{...reqConfig}\r\n    }\r\n    this.query = this.apollo.watchQuery({\r\n      query,\r\n      variables\r\n    });\r\n\r\n    this.query.valueChanges.subscribe(result => {\r\n      if(result.data && result.data[queryConfig.queryName]){\r\n        const rowData = JSON.parse(result.data[queryConfig.queryName].data);       \r\n        for (let item in rowData[0]) {\r\n          this.formsConfig?.forEach((element: any) => {\r\n            if (item === element.name) {\r\n              element.value = rowData[0][item]\r\n            }\r\n          });\r\n        }\r\n        this.show = true;\r\n        this.spinner.hide();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(event: any) {\r\n    this.spinner.show();\r\n    const queryConfig = {\r\n      queryName: this.id !== 'null' ?'updateData':'createData'\r\n    }\r\n    this.mutate(event,queryConfig)\r\n  }\r\n  insert(event:any) {\r\n    const queryConfig = {\r\n      queryName: 'createData'\r\n    }\r\n    const query = gql`\r\n    mutation  ${queryConfig.queryName}($queryInput:QueryInput){\r\n        ${queryConfig.queryName}(queryInput:$queryInput){\r\n          data\r\n        }\r\n    }\r\n    `;\r\n    const reqConfig = {\r\n      datatable:  this.queryConfig?.variables?.datatable,\r\n      data: JSON.stringify(event)\r\n    };\r\n\r\n    const variables: any = {\r\n      queryInput: { ...reqConfig }\r\n    }\r\n    this.apollo.mutate({\r\n      mutation: query,\r\n      variables\r\n    }).subscribe(({ data }) => {\r\n      this.spinner.hide();\r\n      window.history.back();\r\n    },(error) => {\r\n      this.spinner.hide();\r\n      console.log('there was an error sending the query', error);\r\n    });\r\n  }\r\n\r\n  update(event:any){\r\n  }\r\n\r\n\r\n  mutate(event:any,queryConfig:any){\r\n    const query = gql`\r\n    mutation  ${queryConfig.queryName}($queryInput:QueryInput){\r\n        ${queryConfig.queryName}(queryInput:$queryInput){\r\n          data\r\n        }\r\n    }\r\n    `;\r\n    const reqConfig:any = {\r\n      datatable:  this.queryConfig?.variables?.datatable,\r\n      data: JSON.stringify(event),\r\n      id:this.id\r\n    };\r\n    if(this.id === 'null'){\r\n      delete reqConfig.id\r\n    }\r\n    const variables: any = {\r\n      queryInput: { ...reqConfig }\r\n    }\r\n    this.apollo.mutate({\r\n      mutation: query,\r\n      variables\r\n    }).subscribe(({ data }) => {\r\n      this.spinner.hide();\r\n      window.history.back();\r\n    },(error) => {\r\n      this.spinner.hide();\r\n      console.log('there was an error sending the query', error);\r\n    });\r\n  }\r\n\r\n}\r\n","\r\n<app-breadcrumb  [breadcrumbList]=\"breadcrumbList\"></app-breadcrumb>\r\n<app-dynamic-form *ngIf=\"formsConfig && show\"\r\n[cardHeader]=\"'Add/Edit Form'\"\r\n[formTemplate]=\"formsConfig\"\r\n(OnSubmit)=\"onSubmit($event)\"\r\n></app-dynamic-form>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AddEditFormRoutingModule } from './add-edit-form-routing.module';\nimport { AddEditFormComponent } from './add-edit-form.component';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n\n@NgModule({\n  declarations: [\n    AddEditFormComponent\n  ],\n  imports: [\n    CommonModule,\n    AddEditFormRoutingModule,\n    ComponentsModule\n  ]\n})\nexport class AddEditFormModule { }\n"],"sourceRoot":"webpack:///"}